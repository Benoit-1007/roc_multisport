<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ROC Multisport, réservez une expérience unique entre lac et montagne !">
    <title>ROC Multisport - Reservation Page</title>
    <link rel="icon" href="img/background/logoRocMultisport.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/style.css">
</head>
<body id="booking">
    <header>
        <?php require('partials/header.php') ?> 
    </header>
        
    <main class="booking">
        <h1>Formulaire de <span>demande de réservation</span></h1>
        <p>Dans le cadre de votre demande de réservation, celle-ci doit obligatoirement être validée par un retour de notre part en fonction de nos disponibilités.</p>
        <form id="bookingForm" action="booking.php" method='post'>
            <fieldset class="contactInformation">
                <legend>Vos coordonnées</legend>
                <input class="field" type="text" id="contact_firstName"name="contact_firstName" required placeholder="Prénom*">
                <input class="field" type="text" id="contact_lastName" name="contact_lastName" required placeholder="Nom*">
                <input class="field" type="text" name="contact_society" placeholder="Nom de la société">
                <input class="field" type="tel"  id="contact_phone" name="contact_phone" required placeholder="Téléphone(organisateur)*">
                <input class="field" type="mail" id="contact_mail" name="contact_mail" required placeholder="Email*">
                <input class="field" type="text" name="contact_address" required placeholder="Adresse*">
                <input class="field" type="Number" name="contact_postalCode" required placeholder="Code postal*">
                <input class="field" type="text" name="contact_city" required placeholder="Ville*">
                <div class="checkbox">
                    <input class="field" type="checkbox" id="cgv" name="cgv" checked required><label for="cgv">En cochant cette case, j'accepte les conditions générales de vente de ROC MULTISPORT</label>
                </div>
            </fieldset>
            <div class="button formulaSelector">
                <button type="button" id="singleActivityButton">activité simple</button>
                <button type="button" id="rocCocktailButton">cocktail roc</button>
                <button type="button" id="returnButton" class="hide">changer de formule</button>
            </div>
            <div id="singleActivity" class="hide">
                <fieldset>
                    <legend>votre activité / vos activités</legend>
                    <div class="activities"> <!-- DON'T ADD CHILD TO THIS DIV -->
                        <div class="activityItem_1">
                            <div class="activity_1">
                                <p>Activité 1</p>
                                <select class="field singleActivitySelector" name="activity_1">
                                    <option value="empty">Séléctionnez votre activité 1</option>
                                    <option value="bikeHalfDayNoLoc" name="<?= $activities['bikeHalfDayNoLoc']['name'] ?>" data-price="<?= $activities['bikeHalfDayNoLoc']['price'] ?>" data-minParticipants="<?= $activities['bikeHalfDayNoLoc']['minCount'] ?>" data-maxParticipants="<?= $activities['bikeHalfDayNoLoc']['maxCount'] ?>" data-duration="halfDay" data-period="april/october"><?= $activities['bikeHalfDayNoLoc']['name'] ?> - <?= $activities['bikeHalfDayNoLoc']['price'] ?>€/pers.</option>
                                    <option value="bikeAllDayNoLoc" name="<?= $activities['bikeAllDayNoLoc']['name'] ?>" data-price="<?= $activities['bikeAllDayNoLoc']['price'] ?>" data-minParticipants="<?= $activities['bikeAllDayNoLoc']['minCount'] ?>" data-maxParticipants="<?= $activities['bikeAllDayNoLoc']['maxCount'] ?>" data-duration="allDay" data-period="april/october"><?= $activities['bikeAllDayNoLoc']['name'] ?> - <?= $activities['bikeAllDayNoLoc']['price'] ?>€/pers.</option>
                                    <option value="bikeHalfDay" name="<?= $activities['bikeHalfDay']['name'] ?>" data-price="<?= $activities['bikeHalfDay']['price'] ?>" data-minParticipants="<?= $activities['bikeHalfDay']['minCount'] ?>" data-maxParticipants="<?= $activities['bikeHalfDay']['maxCount'] ?>" data-duration="halfDay" data-period="april/october"><?= $activities['bikeHalfDay']['name'] ?> - <?= $activities['bikeHalfDay']['price'] ?>€/pers.</option>
                                    <option value="bikeAllDay" name="<?= $activities['bikeAllDay']['name'] ?>" data-price="<?= $activities['bikeAllDay']['price'] ?>" data-minParticipants="<?= $activities['bikeAllDay']['minCount'] ?>" data-maxParticipants="<?= $activities['bikeAllDay']['maxCount'] ?>" data-duration="allDay" data-period="april/october"><?= $activities['bikeAllDay']['name'] ?> - <?= $activities['bikeAllDay']['price'] ?>€/pers.</option>
                                    <option value="paddleHalfDay" name="<?= $activities['paddleHalfDay']['name'] ?>" data-price="<?= $activities['paddleHalfDay']['price'] ?>" data-minParticipants="<?= $activities['paddleHalfDay']['minCount'] ?>" data-maxParticipants="<?= $activities['paddleHalfDay']['maxCount'] ?>" data-duration="halfDay" data-period="may/october"><?= $activities['paddleHalfDay']['name'] ?> - <?= $activities['paddleHalfDay']['price'] ?>€/pers.</option>
                                    <option value="paddleAllDay" name="<?= $activities['paddleAllDay']['name'] ?>" data-price="<?= $activities['paddleAllDay']['price'] ?>" data-minParticipants="<?= $activities['paddleAllDay']['minCount'] ?>" data-maxParticipants="<?= $activities['paddleAllDay']['maxCount'] ?>" data-duration="allDay" data-period="may/october"><?= $activities['paddleAllDay']['name'] ?> - <?= $activities['paddleAllDay']['price'] ?>€/pers.</option>
                                    <option value="kayak" name="<?= $activities['kayak']['name'] ?>" data-price="<?= $activities['kayak']['price'] ?>" data-minParticipants="<?= $activities['kayak']['minCount'] ?>" data-maxParticipants="<?= $activities['kayak']['maxCount'] ?>" data-duration="halfDay" data-period="may/october"><?= $activities['kayak']['name'] ?> - <?= $activities['kayak']['price'] ?>€/pers.</option>
                                    <option value="climbingHalfDay" name="<?= $activities['climbingHalfDay']['name'] ?>" data-price="<?= $activities['climbingHalfDay']['price'] ?>" data-minParticipants="<?= $activities['climbingHalfDay']['minCount'] ?>" data-maxParticipants="<?= $activities['climbingHalfDay']['maxCount'] ?>" data-duration="halfDay" data-period="may/october"><?= $activities['climbingHalfDay']['name'] ?> - <?= $activities['climbingHalfDay']['price'] ?>€/pers.</option>
                                    <option value="climbingAllDay" name="<?= $activities['climbingAllDay']['name'] ?>" data-price="<?= $activities['climbingAllDay']['price'] ?>" data-minParticipants="<?= $activities['climbingAllDay']['minCount'] ?>" data-maxParticipants="<?= $activities['climbingAllDay']['maxCount'] ?>" data-duration="allDay" data-period="may/october"><?= $activities['climbingAllDay']['name'] ?> - <?= $activities['climbingAllDay']['price'] ?>€/pers.</option>
                                    <option value="viaHalfDay" name="<?= $activities['viaHalfDay']['name'] ?>" data-price="<?= $activities['viaHalfDay']['price'] ?>" data-minParticipants="<?= $activities['viaHalfDay']['minCount'] ?>" data-maxParticipants="<?= $activities['viaHalfDay']['maxCount'] ?>" data-duration="halfDay" data-period="may/october"><?= $activities['viaHalfDay']['name'] ?> - <?= $activities['viaHalfDay']['price'] ?>€/pers.</option>
                                    <option value="viaAllDay" name="<?= $activities['viaAllDay']['name'] ?>" data-price="<?= $activities['viaAllDay']['price'] ?>" data-minParticipants="<?= $activities['viaAllDay']['minCount'] ?>" data-maxParticipants="<?= $activities['viaAllDay']['maxCount'] ?>" data-duration="allDay" data-period="may/october"><?= $activities['viaAllDay']['name'] ?> - <?= $activities['viaAllDay']['price'] ?>€/pers.</option>
                                    <option value="archery" name="<?= $activities['archery']['name'] ?>" data-price="<?= $activities['archery']['price'] ?>" data-minParticipants="<?= $activities['archery']['minCount'] ?>" data-maxParticipants="<?= $activities['archery']['maxCount'] ?>" data-duration="halfDay" data-period="may/october"><?= $activities['archery']['name'] ?> - <?= $activities['archery']['price'] ?>€/pers.</option>
                                    <option value="snowboardRookeasy" name="<?= $activities['snowboardRookeasy']['name'] ?>" data-price="<?= $activities['snowboardRookeasy']['price'] ?>" data-minParticipants="<?= $activities['snowboardRookeasy']['minCount'] ?>" data-maxParticipants="<?= $activities['snowboardRookeasy']['maxCount'] ?>" data-duration="threeHalfDay" data-period="december-april"><?= $activities['snowboardRookeasy']['name'] ?> - <?= $activities['snowboardRookeasy']['price'] ?>€/pers.</option>
                                    <option value="snowboardHalfDay" name="<?= $activities['snowboardHalfDay']['name'] ?>" data-price="<?= $activities['snowboardHalfDay']['price'] ?>" data-minParticipants="<?= $activities['snowboardHalfDay']['minCount'] ?>" data-maxParticipants="<?= $activities['snowboardHalfDay']['maxCount'] ?>" data-duration="halfDay" data-period="december-april"><?= $activities['snowboardHalfDay']['name'] ?> - <?= $activities['snowboardHalfDay']['price'] ?>€/pers.</option>
                                    <option value="snowboardAllDay" name="<?= $activities['snowboardAllDay']['name'] ?>" data-price="<?= $activities['snowboardAllDay']['price'] ?>" data-minParticipants="<?= $activities['snowboardAllDay']['minCount'] ?>" data-maxParticipants="<?= $activities['snowboardAllDay']['maxCount'] ?>" data-duration="allDay" data-period="december-april"><?= $activities['snowboardAllDay']['name'] ?> - <?= $activities['snowboardAllDay']['price'] ?>€/pers.</option>
                                    <option value="splitboardHalfDay" name="<?= $activities['splitboardHalfDay']['name'] ?>" data-price="<?= $activities['splitboardHalfDay']['price'] ?>" data-minParticipants="<?= $activities['splitboardHalfDay']['minCount'] ?>" data-maxParticipants="<?= $activities['splitboardHalfDay']['maxCount'] ?>" data-duration="halfDay" data-period="december-april"><?= $activities['splitboardHalfDay']['name'] ?> - <?= $activities['splitboardHalfDay']['price'] ?>€/pers.</option>
                                    <option value="splitboardAllDay" name="<?= $activities['splitboardAllDay']['name'] ?>" data-price="<?= $activities['splitboardAllDay']['price'] ?>" data-minParticipants="<?= $activities['splitboardAllDay']['minCount'] ?>" data-maxParticipants="<?= $activities['splitboardAllDay']['maxCount'] ?>" data-duration="allDay" data-period="december-april"><?= $activities['splitboardAllDay']['name'] ?> - <?= $activities['splitboardAllDay']['price'] ?>€/pers.</option>
                                </select>
                                <p class="rookeasyMessage hide">Dans le cadre du rookeasy, merci de sélectionner votre 1ère 1/2 journée, nous vous contacterons rapidement pour valider cette date et choisir ensemble les deux 1/2 journées suivantes.</p>
                                <input class="field singleActivityDate" type="date" name="date_activity_1" placeholder="jj/mm/aaaa">
                                <input class="field singleActivityParticipantsCount" type="number" name="participantsCount_activity_1" placeholder="Nombre de participants" min="2" max="12">
                            </div>
                            <p>Participants activité 1</p>
                            <div class="activity_1_participantsList participantsList">
                            </div>
                        </div>
                    </div>
                </fieldset>
                <div class="button">
                    <button type="button" id="addActivityButton">ajouter une activité</button>
                    <button type="button" id="deletActivityButton" class="hide">enlever une activité</button>
                </div>
            </div>
            <div id="rocCocktail" class="hide">
                <fieldset>
                    <legend>Votre ROC Cocktail</legend>
                    <div class="activityItem">
                        <div class="rocCocktailActivities">
                            <select class="field rocFormulaSelector" name="rocCocktail_Formula">
                                <option value="empty">Séléctionnez votre Cocktail ROC</option>
                                <option value="cocktailOneDay" name="<?= $activities['cocktailOneDay']['name'] ?>" data-price="<?= $activities['cocktailOneDay']['price']/100 ?>" data-minParticipants="<?= $activities['cocktailOneDay']['minCount'] ?>" data-maxParticipants="<?= $activities['cocktailOneDay']['maxCount'] ?>" >Cocktail ROC DAY - à partir de <?= (($activities['bikeHalfDayNoLoc']['price'] + $activities['archery']['price'])*(1- $activities['cocktailOneDay']['price']/100)) ?>€/pers.</option>
                                <option value="cocktailTwoDays" name="<?= $activities['cocktailTwoDays']['name'] ?>" data-price="<?= $activities['cocktailTwoDays']['price']/100 ?>" data-minParticipants="<?= $activities['cocktailTwoDays']['minCount'] ?>" data-maxParticipants="<?= $activities['cocktailTwoDays']['maxCount'] ?>">Cocktail ROC WEEK-END - à partir de <?= ((($activities['bikeHalfDayNoLoc']['price'] + $activities['archery']['price'])*2)*(1- $activities['cocktailTwoDays']['price']/100)) ?>€/pers.</option>
                            </select>
                            <p class="rocWeekendMessage hide">Dans le cadre du ROC Week-end, merci de choisir un samedi parmi les dates proposées, le dimanche suivant lui sera associé. Si vous souhaitez pratiquer les activités dans un ordre spécifique, merci de le préciser en commentaire à la fin du formulaire.</p>
                            <?php if (time() < strtotime($year.'-05-01')): ?>
                                <input class="field rocDate rocDayDate hide" type="date" name="date_rocCocktail" min="<?= $year ?>-05-01" max="<?= $year ?>-10-31" placeholder="jj/mm/aaaa">
                                <input class="field rocDate rocWeekendDate hide" type="date" name="date_rocCocktail" min="<?= date("Y-m-d", strtotime("first saturday $nextYear-05")) ?>" max="<?= $year ?>-10-31" step="7" placeholder="jj/mm/aaaa">
                            <?php elseif (strtotime($year.'-05-01') <= time() && time() < strtotime($year.'-10-31')): ?>
                                <input class="field rocDate rocDayDate hide" type="date" name="date_rocCocktail" min="<?= date("Y-m-d") ?>" max="<?= $year ?>-10-31" placeholder="jj/mm/aaaa">
                                <input class="field rocDate rocWeekendDate hide" type="date" name="date_rocCocktail" min="<?= $nextSaturday ?>" max="<?= $year ?>-10-31" placeholder="jj/mm/aaaa">
                            <?php else: ?>
                                <input class="field rocDate rocDayDate hide" type="date" name="date_rocCocktail" min="<?= $nextYear ?>-05-01" max="<?= $nextYear ?>-10-31" placeholder="jj/mm/aaaa">
                                <input class="field rocDate rocWeekendDate hide" type="date" name="date_rocCocktail" min="<?= date("Y-m-d", strtotime("first saturday $nextYear-05")) ?>" max="<?= $nextYear ?>-10-31" step="7" placeholder="jj/mm/aaaa">
                            <?php endif; ?>
                            <input class="field rocParticipantsCount" type="number" name="participantsCount_rocCocktail" min="<?= $activities['cocktailOneDay']['minCount'] ?>" max="<?= $activities['cocktailOneDay']['maxCount'] ?>" placeholder="Nombre de participants">
                        </div>
                        <div class="myRocActivities">
                        </div>
                        <p>Participants</p>
                        <div class="rocCocktail_participantsList participantsList">
                        </div>
                    </div>
                </fieldset>
            </div>
            <textarea class="field" name="comment" id="comment" rows="5" placeholder="Informations complémentaires"></textarea>
            <div class="basket">
                <table>
                    <thead>
                        <tr>
                            <th colspan="4">mon panier</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3">total réservation :</td>
                            <td class="totalPrice"></td>
                        </tr>
                    </tfoot>    
                </table>
            </div>
            
            <div>
                <button type="submit" id="validateReservation">Réserver</button>
                <div class="message">
                </div>
            </div>
        </form>
        
    </main>
    <footer>
        <?php require("partials/footer.php") ?>
    </footer>
    
    <script src="js/jquery-3.4.1.min.js"></script>
    <script>
        // jQuery - display alert 6sec
        $(".validate, .form-error").delay(6000).fadeOut();
    </script>
    <script type="module" src="js/booking.js"></script>
</body>
</html>
